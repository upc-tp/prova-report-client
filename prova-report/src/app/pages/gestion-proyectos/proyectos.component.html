<div>
  <div class="banner">
    <span>Gestion de proyectos de prueba</span>
    <button nz-button nzType="primary" (click)="showModal()">
      <span>Nuevo</span>
    </button>
  </div>
  <nz-modal [(nzVisible)]="isVisible" nzTitle="Proyecto de prueba" (nzOnCancel)="handleCancel()" (nzOnOk)="handleOk()"
    [nzOkLoading]="isOkLoading">
    <form nz-form class="create-form" [formGroup]="validateForm" (ngSubmit)="submitForm()">
      <div class="form-item">
        <div class="form-label">
          Título
        </div>
        <input nz-input name="title" formControlName="title" type="text" id="title" placeholder="Título" />
      </div>
      <div class="form-item">
        <div class="form-label">
          Descripción
        </div>
        <input nz-input name="description" formControlName="description" type="text" id="description"
          placeholder="Descripción" />
      </div>
      <div class="form-item">
        <button nz-button nzBlock nzSize="large" nzType="primary" [nzLoading]="isOkLoading">
          Guardar
        </button>
      </div>
    </form>
    <div *nzModalFooter></div>
  </nz-modal>

  <div class="filters-container">
    <i nz-icon nzType="search"></i>&nbsp;&nbsp;
    <input (change)="inputChanged($event)" name="search" type="text" id="search"
      placeholder="Buscar por título o descripción" />
    <nz-alert *ngIf="saved" nzBanner nzMessage="Se ha registrado satisfactoriamente" nzType="success"></nz-alert>
    <nz-alert *ngIf="updated" nzBanner nzMessage="Se ha actualizado satisfactoriamente" nzType="success"></nz-alert>
  </div>
  <nz-table #middleTable nzSize="middle" [nzData]="data" [nzFrontPagination]="false" [nzPageIndex]="page"
    [nzPageSize]="pageSize" [nzShowPagination]="true" [nzTotal]="count" [nzShowTotal]="rangeTemplate"
    (nzPageIndexChange)="onPageIndexChange($event)">
    <thead>
      <tr>
        <th>Título</th>
        <th>Descripción</th>
        <th>Fecha de registro</th>
        <th>Registrado por</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let data of middleTable.data" (click)="updateProject(data.id)">
        <td>{{ data.title }}</td>
        <td>{{ data.description }}</td>
        <td>{{ data.registerDate }}</td>
        <td>{{ data.registerBy }}</td>
      </tr>
    </tbody>
    <button class="fab" nz-button nzType="primary" nzSize="large" nzShape="circle" (click)="showModal()">
      <i nz-icon nzType="plus"></i>
    </button>
  </nz-table>

  <ng-template #rangeTemplate let-range="range" let-total>
    Mostrando {{ range[0] }}-{{ range[1] }} de {{ count }} resultados
  </ng-template>
</div>