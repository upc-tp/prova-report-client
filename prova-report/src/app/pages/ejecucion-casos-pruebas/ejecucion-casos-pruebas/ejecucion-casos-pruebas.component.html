<div>
  <div class="banner">
    <span>Ejecucion Casos Pruebas</span>
  </div>
  <form [formGroup]="filterFormGroup">
    <div class="row d-flex">
      <div class="col-md-3">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Proyectos</mat-label>
          <mat-select
            formControlName="projects"
            (selectionChange)="updateFilter($event)"
          >
          <mat-option *ngFor="let pro of listProjects" [value]="pro.key">
            {{pro.value}}
          </mat-option>
          </mat-select>
          <mat-hint
            *ngIf="validaciones('projects')"
            class="form-text text-danger animate__animated animate__headShake"
            >Seleccione uno</mat-hint
          >
        </mat-form-field>
      </div>

      <div class="col-md-3">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Test Suite</mat-label>
          <mat-select
            formControlName="testSuite"
            (selectionChange)="updateFilter($event)"
          >
          <mat-option *ngFor="let tSuite of listTestSuite" [value]="tSuite.key">
            {{tSuite.value}}
          </mat-option>
          </mat-select>
          <mat-hint
            *ngIf="validaciones('testSuite')"
            class="form-text text-danger animate__animated animate__headShake"
            >Seleccione uno</mat-hint
          >
        </mat-form-field>
      </div>

      <div class="col-md-3">
        <button
          mat-flat-button
          color="primary"
          class="button-global ps-3 pe-3"
          style="margin-top: 0.5rem"
          (click)="search()"
        >
          <span
            class="iconify"
            data-icon="charm:paper-plane"
            style="color: white"
            data-width="24"
            data-height="24"
          ></span>
          <span>Aplicar Filtros</span>
        </button>
      </div>
    </div>
  </form>

  <div [hidden]="listTestCase.length == 0" style="margin-top: 3rem;">
    <div class="col-12">
      <mat-form-field appearance="outline" class="w-100 filter-table">
        <mat-icon matSuffix>search</mat-icon>
        <mat-label>Filtrar por Título, Descripcion, Estado, Prioridad, Responsable o Registrado Por</mat-label>
        <input
          matInput
          autocomplete="off"
          (keyup)="filterTableTestCase($event)"
          #inputFilter
        />
      </mat-form-field>
    </div>
    <table
    mat-table
    class="table-hover"
    [dataSource]="dataSourceTestCase"
    #sort
    matSort
    style="width: 100%;"
    >
    <ng-container matColumnDef="title">
      <th mat-header-cell *matHeaderCellDef>Título</th>
      <td mat-cell *matCellDef="let element">
        {{element.title}}
      </td>
    </ng-container>

    <ng-container matColumnDef="description">
      <th mat-header-cell *matHeaderCellDef>Descripción</th>
      <td mat-cell *matCellDef="let element">
        {{element.description}}
      </td>
    </ng-container>

    <ng-container matColumnDef="state">
      <th mat-header-cell *matHeaderCellDef>Estado</th>
      <td mat-cell *matCellDef="let element">
        {{element.testState.name}}
      </td>
    </ng-container>

    <ng-container matColumnDef="priority">
      <th mat-header-cell *matHeaderCellDef>Prioridad</th>
      <td mat-cell *matCellDef="let element">
        {{element.priority.name}}
      </td>
    </ng-container>

    <ng-container matColumnDef="severity">
      <th mat-header-cell *matHeaderCellDef>Severidad</th>
      <td mat-cell *matCellDef="let element">
        {{element.severity.name}}
      </td>
    </ng-container>

    <ng-container matColumnDef="registerDate">
      <th mat-header-cell *matHeaderCellDef>Fecha de Registro</th>
      <td mat-cell *matCellDef="let element">
        {{element.createdAt}}
      </td>
    </ng-container>

    <ng-container matColumnDef="registerBy">
      <th mat-header-cell *matHeaderCellDef>Registrado Por</th>
      <td mat-cell *matCellDef="let element">
        {{element.createdAt}}
      </td>
    </ng-container>

    <ng-container matColumnDef="responsable">
      <th mat-header-cell *matHeaderCellDef>Responsable</th>
      <td mat-cell *matCellDef="let element">
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="headerColumn"></tr>
    <tr mat-row *matRowDef="let row; columns: headerColumn"></tr>
    <tr class="mat-row text-center" *matNoDataRow>
      <td
        *ngIf="inputFilter.value == ''"
        class="mat-cell"
        colspan="3"
      >
        No se encontraron casos de prueba <i class="bi bi-journals"></i>
      </td>
      <td
        *ngIf="inputFilter.value != ''"
        class="mat-cell"
        colspan="3"
      >
        No hay registros con el valor: "{{
          inputFilter.value
        }}" <i class="bi bi-journals"></i
        ><i class="bi bi-search"></i>
      </td>
    </tr>
    </table>

    <mat-paginator
    [pageSizeOptions]="[5, 10, 15, 20]"
    showFirstLastButtons
    #paginator
  ></mat-paginator>
  </div>


  <div class="col-12 centerItems" style="margin-top: 3rem;" *ngIf="listTestCase.length == 0">
    <div style="width: 50%; overflow: hidden; text-align: center">
      <div>
        <mat-icon class="NoTest" svgIcon="NoTest"></mat-icon>
      </div>
      <div class="text-w-bold text-fs-32 text-purple title-table-photo text-center">Selecciona tus filtros</div>
      <div class="text-w-400 text-fs-14 text-center text-gray">
        Para poder mostrarte los Casos de Prueba a ejecutar
      </div>
    </div>
  </div>
</div>
