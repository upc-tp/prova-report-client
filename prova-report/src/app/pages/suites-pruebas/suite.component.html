<div class="backgroundContent">
  <div class="banner">
    <span>Suite pruebas</span>
    <button nz-button nzType="primary" (click)="showModal()">
      <span>Nuevo</span>
    </button>
  </div>

  <nz-modal [(nzVisible)]="isVisible" nzTitle="Suite de prueba" (nzOnCancel)="handleCancel()" (nzOnOk)="handleOk()"
    [nzOkLoading]="isOkLoading">
    <form nz-form class="create-form" [formGroup]="validateForm" (ngSubmit)="submitForm()">
      <div class="form-item">
        <nz-form-label>
          Título
        </nz-form-label>
        <input nz-input name="title" formControlName="title" type="text" id="title" placeholder="Título"
          autocomplete="off" [ngClass]="{ 'is-invalid': submitted && f.title.errors }"/>
        <span class="invalid-feedback" *ngIf="submitted && f.title.errors?.required">* Este campo es obligatorio</span>
      </div>
      <div class="form-item">
        <nz-form-label>
          Descripción
        </nz-form-label>
        <input nz-input name="description" formControlName="description" type="text" id="description"
          placeholder="Descripción" autocomplete="off" [ngClass]="{ 'is-invalid': submitted && f.description.errors }" />
        <span class="invalid-feedback" *ngIf="submitted && f.description.errors?.required">* Este campo es
          obligatorio</span>
      </div>
      <div class="form-item">
        <nz-form-label>
          Proyecto
        </nz-form-label>
        <nz-select nzSize="large" formControlName="selectProject" class="select-input" [ngClass]="{ 'is-invalid': submitted && f.selectProject.errors }"
          nzPlaceHolder="Seleccione Proyecto" [nzOptions]="projects">
          <nz-option nzValue="project.value" nzLabel="project.label"></nz-option>
        </nz-select>
        <span class="invalid-feedback" *ngIf="submitted && f.selectProject.errors?.required" >* Este campo es obligatorio</span>
      </div>
      <div class="form-item">
        <button nz-button nzBlock nzSize="large" nzType="primary" [nzLoading]="isOkLoading">
          Guardar
        </button>
      </div>
    </form>
    <div *nzModalFooter></div>
  </nz-modal>
  <div class="filters-container">
    <i nz-icon nzType="search"></i>&nbsp;&nbsp;
    <input (change)="inputChanged($event)" name="search" type="text" id="search"
      placeholder="Buscar por título o descripción" />
    <hr style="border-color: white;">
  </div>
  <nz-table #middleTable nzSize="middle" [nzData]="data" [nzFrontPagination]="false" [nzPageIndex]="page"
    [nzPageSize]="pageSize" [nzShowPagination]="true" [nzTotal]="count" [nzShowTotal]="rangeTemplate"
    (nzPageIndexChange)="onPageIndexChange($event)">
    <thead>
      <tr>
        <th>Etiqueta</th>
        <th>Título</th>
        <th>Proyecto</th>
        <th>Fecha de registro</th>
        <th>Registrado por</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let data of middleTable.data">
        <td>{{ data.tag }}</td>
        <td>{{ data.title }}</td>
        <td>{{ data.project }}</td>
        <td>{{ data.registerDate }}</td>
        <td>{{ data.registerBy }}</td>
        <td>
          <button style="margin-right: 0.5rem" nz-button nzType="primary" (click)="updateSuite(data.id)">
            <i nz-icon nzType="edit" nzTheme="outline"></i>
          </button>
          <button nz-button nzType="primary" (click)="detailTestSuite(data.id)">
            <i nz-icon nzType="profile" nzTheme="outline"></i>
          </button>
        </td>
      </tr>
    </tbody>
  </nz-table>
  <ng-template #rangeTemplate let-range="range" let-total>
    Mostrando {{ range[0] }}-{{ range[1] }} de {{ count }} resultados
  </ng-template>
</div>